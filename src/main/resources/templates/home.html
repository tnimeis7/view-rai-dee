<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org" xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>ViewRaidee</title>
    <link th:rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link th:rel="stylesheet" th:href="@{/css/article-blog.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/check-field.js}"></script>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <style>
        .checked{
            color: orange;
        }
        .btn-type{
            padding-right: 10px;
            background-color: transparent;
            border-radius: 0.25rem;
            border: 0;
            font-size: 20px;
            width: 150px;
            height: 50px;
        }
        .btn-type:hover{
            background-color: #94a7ae;
        }
        .img-sqr{
            width: 250px;
            height: 150px;
        }
        .more-box{
            width: 250px;
            height: 150px;
            opacity: 80%;
            background-color: black;
        }
        .genre-name {
            -webkit-text-fill-color: #F7F7F7;
            position: relative;
            bottom: 0;
            left: 5px;
        }
        a{
            text-decoration: none;
        }
        ::-webkit-scrollbar-track {
            border: 1px solid #3a4147;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #3a4147;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #1e2125;
        }
    </style>

</head>
<body style="background-color: #F7F7F7;">
<div th:insert="fragments/header :: header"></div>

<!-- start Slideshow -->
<div class="frame-vrd" style="width:100%; background-color: black; position: inherit;padding-top: 56px;">
    <div class="container">
        <!--    <h1 class="display-6">Welcome</h1>-->

        <!--    <p th:text="|${greeting}, ${user}|"></p>-->

        <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img th:src="${mostPopular.get(0).coverPath}" class="d-block w-100" style="height: 450px; object-fit: cover;" >
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Top #1</h2>
                        <h1 th:text="${mostPopular.get(0).movieName}"></h1>
                        <h4 th:text="${mostPopular.get(0).atcName}"></h4>
                        <th:block th:each="i: ${#numbers.sequence(1, 5)}">
                        <span th:if="${mostPopular.get(0).starRate >= i}">
                            <span class="fa fa-star checked"></span>
                        </span>
                            <span th:unless="${mostPopular.get(0).starRate >= i}">
                            <span class="fa fa-star"></span>
                        </span>
                        </th:block>
                        <p>ผู้เขียนรีวิว <br> <span th:text="${mostPopular.get(0).authorName}"> </span>
                        </p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img th:src="${mostPopular.get(1).coverPath}" class="d-block w-100" style="height: 450px; object-fit: cover;" >
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Top #2</h2>
                        <h1 th:text="${mostPopular.get(1).movieName}"></h1>
                        <h4 th:text="${mostPopular.get(1).atcName}"></h4>
                        <th:block th:each="i: ${#numbers.sequence(1, 5)}">
                        <span th:if="${mostPopular.get(1).starRate >= i}">
                            <span class="fa fa-star checked"></span>
                        </span>
                            <span th:unless="${mostPopular.get(1).starRate >= i}">
                            <span class="fa fa-star"></span>
                        </span>
                        </th:block>
                        <p>ผู้เขียนรีวิว <br> <span th:text="${mostPopular.get(1).authorName}"> </span></p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img th:src="${mostPopular.get(2).coverPath}" class="d-block w-100" style="height: 450px; object-fit: cover;" >
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Top #3></h2>
                        <h1 th:text="${mostPopular.get(2).movieName}"></h1>
                        <h4 th:text="${mostPopular.get(2).atcName}"></h4>
                        <th:block th:each="i: ${#numbers.sequence(1, 5)}">
                        <span th:if="${mostPopular.get(2).starRate >= i}">
                            <span class="fa fa-star checked"></span>
                        </span>
                            <span th:unless="${mostPopular.get(2).starRate >= i}">
                            <span class="fa fa-star"></span>
                        </span>
                        </th:block>
                        <p>ผู้เขียนรีวิว <br> <span th:text="${mostPopular.get(2).authorName}"> </span></p>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

    </div>

</div>
<!-- End Slide Show -->

    <div class="d-flex bd-highlight justify-content-center" style="padding-top: 10px;">
        <button id="movie" onclick="clicked()" th:onclick="|window.location.href='/pop-by-type/Movie'|" class="btn-type">ภาพยนตร์</button>
        <button id="series" onclick="clicked()" th:onclick="|window.location.href='/pop-by-type/Series'|" class="btn-type">ซีรี่ส์</button>
        <button id="tvShow" onclick="clicked()" th:onclick="|window.location.href='/pop-by-type/TVShow'|" class="btn-type">รายการทีวี</button>
        <button id="animation" onclick="clicked()" th:onclick="|window.location.href='/pop-by-type/Animation'|" class="btn-type">อนิเมชัน</button>
        <button id="animeJp" onclick="clicked()" th:onclick="|window.location.href='/pop-by-type/AnimeJp'|" class="btn-type">อนิเมะญี่ปุ่น</button>

        <div class="d-flex" style="padding-left: 50px;" >
            <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search"
                   aria-describedby="search-addon" style="width: 300px;"/>
            <span class="input-group-text border-0" id="search-addon">
                <i class="fa fa-search" aria-hidden="true"></i>
            </span>
        </div>
    </div>

    <div class="container-fluid" style="padding-left: 30px; padding-right: 30px;padding-top: 15px;">
        <div class="frame-vrd" style="background-color: #94a7ae; height: 400px;">
            <h4 style="padding-left: 15px; padding-top: 15px;">บทความรีวิว<span th:text="${type}"></span>ที่ได้รับความนิยมสูงสุด</h4>
            <div class="d-flex justify-content-around" style="padding-top: 20px;">
                <div th:each="mostPopT : ${mostPopularType}">
                    <a th:href="@{'/articles/' + ${mostPopT.id}}">
                        <img th:src="${mostPopT.coverPath}" class="img-sqr">
                    </a>
                </div>

                <div class="card more-box align-items-center" style="background-color: black;" >
                    <h5 class="card-title" style="color: #F7F7F7; padding-top: 25%;">ดูเพิ่มเติม</h5>
                </div>
            </div>
            <h4 style="padding-left: 15px; padding-top: 30px;">Top 3 นักเขียนยอดนิยม</h4>
        </div>
    </div>

<!-- Top 3 reviewer -->
<div class="container" style="position: relative; top: -100px;">
    <div class="row">
        <div class="col-12 col-sm-6 col-md-4 col-lg-3" th:each="i: ${#numbers.sequence(0, 2)}">
            <div class="our-team" style="max-width: 250px; max-height: 320px;">
                <div class="picture">
                    <img class="img-fluid" th:src="${popularAccount[i].photo}">
                </div>
                <div class="team-content" >
                    <h4 class="name" th:text="${popularAccount[i].username}"></h4>
                    <h5>Top <span th:text="${i+1}"></span></h5>
                </div>
                <div class="social d-inline-flex justify-content-center" style="padding-top: 0.25rem;color: #F7F7F7;">
                    <h4 th:text="${popularAccount[i].countHeart}"></h4>
                    <h4 style="padding-left: 0.5rem;">LIKES</h4>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Genre -->
<div class="container" style="padding-top: 10px;position: relative;">
    <h4>หมวดหมู่หนัง</h4>
        <div class="genreBox align-items-center">
            <div th:each="genreName : ${allGenre}">
                <div class="d-flex mt-3 justify-content-around">
                    <a th:href="@{'/articles'}">
                        <div class="col-4 rounded card-genre">
                            <h2 th:text="${genreName}" class="genre-name" style="padding-top: 16%;padding-left: 15px;"></h2>
                        </div>
                    </a>
                    <div class="col-4 rounded card-genre " style="width: 250px;">
                        <h2 class="genre-name" >col5</h2>
                    </div>
                </div>
            </div>

        </div>

</div>

<!-- Streaming Platform -->
<div class="container" style="padding-top: 50px;">
    <h4>ดูที่</h4>
        <div class="platformBox " >
            <div class="d-inline-flex ">
                <div th:each="pf : ${platforms}" style="margin: 15px;">
                    <a th:href="@{'/articles/filter/platform/' + ${pf.id}}">
                        <img th:src="${pf.picPath}" class="platformLogo">
                    </a>

                </div>
            </div>
        </div>
</div>

<!-- Report-->
<div class="container" style="padding-top: 50px; padding-bottom: 50px;">
    <form th:if="${user}!='ผู้เยี่ยมชม'" th:action="@{/feedback/add}" method="POST">
        <label for="feedback">ส่ง feedback ให้เรา</label>
        <textarea class="form-control" id="feedback" name="fbContent" rows="5"></textarea><br>
        <button type="submit" class="btn btn-primary" onclick="return checkFeedback()">ส่ง</button>
    </form>
</div>

</body>
<script>
    function clicked() {
        document.getElementById("movie").style.backgroundColor = "#94a7ae";
        // Element.setAttribute([[${mostPopular}]], )
    }
</script>

</html>